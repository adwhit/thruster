// *** This file was generated by thruster ***

use stub::*;
use types::*;
use std::io;
use rocket;
use rocket_contrib::Json;

{{#each entrypoints as |e|~}}
#[{{~e.method~}}("
{{~e.route~}}
{{~#if e.query~}}?<{{e.query}}>{{/if~}}
")]
fn _{{e.function}}(
    {{~#each e.args as |arg|~}}
    {{arg.name}}: {{arg.type}},
    {{~/each~}}
) -> Result<Json<{{e.result_type}}>, ()> {
    {{e.function}}().map(Json)
}

{{/each~}}

pub fn mount_api(rocket: rocket::Rocket) -> rocket::Rocket {
    rocket.mount("/", routes![
        {{#each entrypoints as |e|~}}
        _{{e.function}},
        {{/each~}}
    ])
}
